<!DOCTYPE html>
<html lang="zh-TW">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>REINVENT ME - THE TURNS</title>

  <style>
    @font-face {
      font-family: 'Unifont';
      src: url('fonts/unifont.otf') format('opentype');
    }

    body {
      margin: 0;
      font-family: 'Unifont', monospace;
      font-size: 20px;
      line-height: 1.6;
      color: #00ffcc;
      background: url('images/worldmap.jpg') no-repeat center center / cover;
      background-color: black;
      background-attachment: fixed;
      
    }
    
    /* ======= åœ°åœ–å°é¢æ¨£å¼ ======= */
    #cover-map {
      position: absolute;
      width: 100vw;
      height: 100vh;
      background: url('images/worldmap.jpg') no-repeat center center / cover;
      overflow: hidden;
    }

    .map-character {
      position: fixed;
      left: 50%;
      top: 50%;
      width: 55px;
      height: 55px;
      background: url('images/walking-man.gif') no-repeat center center / contain;
      cursor: pointer;
      transition: top 2s ease, left 2s ease;
      transform-origin: center center;
      z-index: 1;
      
    }
  

    .map-popup {
      display: none;
      position: absolute;
      left: 50%;
      top: 60%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.9);
      border: 2px solid #00ffcc;
      padding: 20px;
      text-align: center;
      color: #00ffcc;
      z-index: 10;
    }

    .map-popup button {
      margin-top: 15px;
      padding: 10px 20px;
      background-color: #00ffcc;
      border: none;
      color: black;
      cursor: pointer;
      font-family: 'Unifont', sans-serif;
    }

    .map-popup button:hover {
      background-color: black;
      color: #00ffcc;
      border: 2px solid #00ffcc;
      box-shadow: 
        inset 2px 2px 0 #00ffcc,
        0 0 5px #00ffcc,               /* å¤–åœå¾®å¾®ç™¼å…‰ */
        0 0 10px rgba(0, 255, 204, 0.5); /* é ä¸€é»çš„å…‰æšˆ */
      
      transform: scale(1.02);
      transition: all 0.2s ease;
    }

    #taiwan-container {
      display: none;
      position: absolute;
      left: 90%;
      top: 50%;
      transform: translate(-50%, -50%) scale(0.5);
      opacity: 0;
      z-index: 5;
      text-align: center;
      transition: transform 1s ease-out, opacity 1s ease-out;
    }

    
    #taiwan-glow {
      position: absolute;
      left: 1206px;
      top: 362px;
      width: 15px;
      height: 15px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255, 215, 0, 0.9), rgba(255, 165, 0, 0.2));
      animation: glowPulse 2s ease-in-out infinite;
      transform: translate(-50%, -50%);
      z-index: 10;
      pointer-events: none;
      display: none;
    }

    @keyframes glowPulse {
      0% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.6;
      }
      50% {
        transform: translate(-50%, -50%) scale(1.5);
        opacity: 1;
      }
      100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.6;
      }
    }

    .taiwan-info {
      font-size: 16px;
      color:#00ffcc;
      background-color: rgba(0, 0, 0, 0.8);
      padding: 10px 20px;
      border: 2px solid #00ffcc;
      display: inline-block;
      text-align: left;
      max-width: 300px;
      box-sizing: border-box;
      border-radius: 8px;
      box-shadow: 0 0 15px #00ffcc;
    }
    
    .taiwan-info .card-content {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 10px;
    }

    .taiwan-info img {
      width: 120px;
      height: auto;
      margin-left: 10px;
      display: block;
      
    }

    .vertical-text {
      writing-mode: vertical-rl;
      text-orientation: upright;
      font-size: 24px;
      font-weight: bold;
      line-height: 1.4;
      padding: 0 5px;
      text-align: center;
      color: gold;
      text-shadow: 0 0 10px gold, 0 0 10px #fff;
      
    }


    .info-row {
      display: flex;
      justify-content: space-between;
      margin: 4px 0;
    }

    .label {
      width: 65%;
      text-align: left;
    }

    .value {
      width: 35%;
      text-align: right;
    }

    


    /* ======= ä¸»éŠæˆ²æ¨£å¼ ======= */
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .section {
      display: none;
      flex-direction: column;
      align-items: center;
      margin-bottom: 60px;
    }

    .timeline {
      width: 100%;
      height: 100px;
      position: relative;
      margin-bottom: 30px;
      background-color: rgba(0, 0, 0, 0.6);
      border: 2px solid #00ffcc;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
    }

    .timeline-marker {
      font-size: 16px;
    }

    .story {
      background: rgba(0, 0, 0, 0.8);
      padding: 20px;
      border: 2px solid #00ffcc;
      width: 100%;
      margin-bottom: 20px;
      white-space: pre-wrap;
      z-index: 3;
    }

    .dialogue {
      display: none;
      background-color: #111;
      border: 2px solid #00ffcc;
      padding: 20px;
      text-align: center;
    }

    .choices button {
      margin: 10px;
      padding: 10px 20px;
      background-color: #00ffcc;
      border: none;
      color: black;
      font-family: 'Unifont', sans-serif;
      cursor: pointer;
    }

    .result {
      display: none;
      background-color: #3e3a39;           /* å¾©å¤æ£•ç°åº• */
      color: #eae6d5;                      /* ç±³ç™½å­—ï¼Œå¾©å¤è¢å¹•é¢¨æ ¼ */
      padding: 20px;
      border: 2px solid #c2aa71;           /* æš—é‡‘è‰²é‚Šæ¡† */
      margin-top: 20px;
      font-family: 'Unifont', monospace;     /* ç­‰å¯¬åƒç´ æ„Ÿå­—é«” */
      font-size: 18px;
      white-space: pre-wrap;

      /* é™°å½±æ•ˆæœï¼šåƒç´ ä½ç§»æ„Ÿ */
      box-shadow:
        0 0 0 1px #000 inset,             /* é»‘æ¡†åƒç´ å…§é‚Š */
        2px 2px 0 #000,                   /* åƒç´ é™°å½±æ•ˆæœ */
        0 0 10px rgba(0, 0, 0, 0.5);      /* è¼•æŸ”æ¨¡ç³Šé™°å½± */

      background-image: repeating-linear-gradient(
        0deg, rgba(255,255,255,0.02), rgba(255,255,255,0.02) 1px,
        transparent 1px, transparent 4px
      );
    }

  </style>
</head>

<body>
  <!-- åœ°åœ–å°é¢ -->
  <div class="map-character" onclick="showPopup()"></div>
  <div id="cover-map">
    
    
    <div id="taiwan-glow"></div>

  <div id="taiwan-container">
      
    <div class="taiwan-info">
      <div class="card-content">
        <div class="vertical-text">TAIWAN<br>SSRãƒ»</div>
        <img id="taiwan-map" src="images/tw-map.jpg" alt="å°ç£åœ°åœ–">
      </div>
      <!-- ä¸‹æ–¹è³‡æ–™æ¬„ -->
      <div class="info-row"><span class="label">HDI æ’å</span><span class="value">No.19</span></div>
      <div class="info-row"><span class="label">äººé¡ç™¼å±•æŒ‡æ•¸</span><span class="value">0.926</span></div>
      <div class="info-row"><span class="label">å¹³å‡å£½å‘½</span><span class="value">79.8 yrs</span></div>
      <div class="info-row"><span class="label">æŠ•èƒç¨€æœ‰åº¦</span><span class="value">0.2905%</span></div>
    </div>
    
  </div>

    <div class="map-popup" id="map-popup">
      <p>ä½ åœ¨æŠ•èƒæ™‚ï¼Œå¹¸é‹åœ°æŠ½åˆ°SSRå¡ç‰‡:å°ç£ï¼<br>é»æ“Šã€Œé–‹å§‹æ—…ç¨‹ã€å±•é–‹ä½ é‡å•Ÿçš„äººç”Ÿã€‚</p>
      <button onclick="startJourney()">é–‹å§‹æ—…ç¨‹</button>
    </div>
  </div>

  <!-- ä¸»æµç¨‹å®¹å™¨ -->
  <div class="container">
   
    <!-- step1 -->
    <div class="section" id="step1">
      <div class="timeline">
        <div class="timeline-marker">ğŸ•’ 2004ï½œå‡å­¸ : æˆ‘æƒ³æˆç‚ºèª°?</div>
        
      </div>
      <div class="story" id="story1"></div>
      <div class="dialogue" id="dialogue1">
        ä½ æ˜¯å¦è¦ä¸é¡§å®¶äººèˆ‡è€å¸«çš„å»ºè­°ï¼Œé¸æ“‡å°±è®€é¤é£²ç§‘ï¼Ÿ<br>
        <div class="choices">
          <button onclick="wrongChoice('step1')">æ˜¯</button>
          <button onclick="nextStep('step1', 'step2')">å¦</button>
        </div>
      </div>
      <div class="result" id="result1"></div>
    </div>

    <!-- step2 -->
    <div class="section" id="step2">
      <div class="timeline">
        <div class="timeline-marker">ğŸ•’ 2013ï½œæ”¹è®Šçš„ç¬¬ä¸€æ­¥ : æˆ‘æƒ³è¦çš„ï¼Œæˆ‘è‡ªå·±åŠªåŠ›åŠªåŠ›!</div>
        
      </div>
      <div class="story" id="story2"></div>
      <div class="dialogue" id="dialogue2">
        ä½ æ˜¯å¦é¡˜æ„æ‰¿æ“”æœªçŸ¥çš„å¾Œæœèˆ‡å¾—å¤±ï¼Œå‰å¾€æ¾³æ´²æ‰“å·¥è³ºå–å­¸è²»ï¼Ÿ<br>
        <div class="choices">
          <button onclick="nextStep('step2', 'step3')">æ˜¯</button>
          <button onclick="wrongChoice('step2')">å¦</button>
        </div>
      </div>
      <div class="result" id="result2"></div>
    </div>

    <!-- step3 -->
    <div class="section" id="step3">
      <div class="timeline">
        <div class="timeline-marker">ğŸ•’ 2018ï½œæ¨é–‹ä¸–ç•Œçš„é–€ : å¥½å¥‡å¿ƒæ˜¯æŠŠé›™é¢åˆƒã€‚</div>
        
      </div>
      <div class="story" id="story3"></div>
      <div class="dialogue" id="dialogue3">
        ä½ æ˜¯å¦é¡˜æ„é›¢é–‹ç¾åœ¨çš„ç”Ÿæ´»åœˆï¼Œæ”¾æ£„ä½ çš„ç§»æ°‘è¨ˆç•«ï¼Œå‰å¾€æŒ‘æˆ°ç¾åœ‹è·å ´ï¼Ÿ<br>
        <div class="choices">
          <button onclick="nextStep('step3', 'step4')">æ˜¯</button>
          <button onclick="wrongChoice('step3')">å¦</button>
        </div>
      </div>
      <div class="result" id="result3"></div>
    </div>

    <!-- step4 -->
    <div class="section" id="step4">
      <div class="timeline">
        <div class="timeline-marker">ğŸ•’ 2020ï½œå®¹å¿å®ƒç™¼ç”Ÿ : å®‡å®™è£¡å”¯ä¸€çš„æ°¸æ†æ˜¯"è®ŠåŒ–"ã€‚</div>
        
      </div>
      <div class="story" id="story4"></div>
      <div class="dialogue" id="dialogue4">
        è€ƒæ…®äº†ä¸€é™£å­ä»¥å¾Œï¼Œä½ æ˜¯å¦è¦æ¥å—é‚€ç´„å‰å¾€å€«æ•¦ï¼Ÿ<br>
        <div class="choices">
          <button onclick="wrongChoice('step4')">æ˜¯</button> 
          <button onclick="nextStep('step4', 'step5')">å¦</button> 
        </div>
      </div>
      <div class="result" id="result4"></div>
    </div>
    <!-- step5 -->
    <div class="section" id="step5">
      <div class="timeline">
        <div class="timeline-marker">ğŸ•’ 2023ï½œè¢«å·èµ°çš„é‚£å¹¾å¹´ : æ—¥å­èˆ‡æˆ‘éƒ½æ·¹æ²’åœ¨ä¸–ç•Œçš„æš«åœè£¡ã€‚ </div>
        
      </div>
      <div class="story" id="story5"></div>
      <div class="dialogue" id="dialogue5">
        ä½ æ˜¯å¦è¦å†æ¬¡é›¢é–‹ç†Ÿæ‚‰çš„èˆ’é©åœˆï¼Œå‰å¾€åŠ æ‹¿å¤§ï¼Ÿ<br>
        <div class="choices">
          <button onclick="nextStep('step5', 'step6')">æ˜¯</button>
          <button onclick="wrongChoice('step5')">å¦</button>
        </div>
      </div>
      <div class="result" id="result5"></div>
    </div>

    <!-- step6 -->
    <div class="section" id="step6">
      <div class="timeline">
        <div class="timeline-marker">ğŸ•’ 2024ï½œè‹¦é›£ : å‡¡æ®ºä¸æ­»æˆ‘çš„ï¼Œå¿…ä½¿æˆ‘å¼·å¤§ã€‚</div>
        
      </div>
      <div class="story" id="story6"></div>
      <div class="dialogue" id="dialogue6">
        ä½ æ˜¯å¦è¦èˆ‡ä¸»å»šå¦¥å”ï¼Œä»¥æ›å–ç¹¼çºŒåœ¨æ˜Ÿç´šé¤å»³å·¥ä½œï¼Ÿ<br>
        <div class="choices">
          <button onclick="wrongChoice('step6')">æ˜¯</button>
          <button onclick="nextStep('step6', 'step7')">å¦</button>
        </div>
      </div>
      <div class="result" id="result6"></div>
    </div>

    <!-- step7 -->
    <div class="section" id="step7">
      <div class="timeline">
        <div class="timeline-marker">ğŸ•’ 2025ï½œé‡å•Ÿ :æˆ‘æœƒæˆç‚ºæˆ‘æƒ³è¦çš„æ¨£å­ ã€‚</div>
        
      </div>
      <div class="story" id="story7"></div>
      <div class="dialogue" id="dialogue7">
        ä½ æ˜¯å¦é¡˜æ„æš«æ™‚æ”¾ä¸‹ä½ çš„ä¸å®‰ï¼Œæœæˆç‚ºè»Ÿé«”å·¥ç¨‹å¸«çš„æ–¹å‘åŠªåŠ›åŠªåŠ›ï¼Ÿ<br>
        <div class="choices">
          <button onclick="endGame()">æ˜¯</button>
          <button onclick="wrongChoice('step7')">å¦</button>
        </div>
      </div>
      <div class="result" id="result7"></div>
    </div>

  <script>
    const stories = [
      `ä½ å¾å°å°±æ“…é•·è®€æ›¸è€ƒè©¦ï¼Œé›–ç„¶ä¸å¤ªæ‡‚ä¸Šå­¸çš„æ„ç¾©ï¼Œä½†é‚„æ˜¯ä¹–ä¹–åœ°æ‰®æ¼”å¥½å­¸ç”Ÿã€‚
ä½ åäº”æ­²æ™‚ï¼Œå³å°‡å‡ä¸Šé«˜ä¸­ï¼Œé¢è‡¨äº†äººç”Ÿç¬¬ä¸€å€‹å²”è·¯å£ï¼Œ
å› ç‚ºä½ çš„æˆç¸¾é‚„ä¸éŒ¯ï¼Œæ‰€ä»¥çˆ¶æ¯èˆ‡å­¸æ ¡çš„è€å¸«éƒ½å¸Œæœ›ä½ é¸æ“‡æ™®é€šé«˜ä¸­ã€‚

ä½†ä½ ç¸½æ˜¯å°å»šæˆ¿çš„äº‹ç‰©ç‰¹åˆ¥è‘—è¿·ï¼Œç•¶æ™‚ä½ å¿ƒä¸­æœ‰å€‹æƒ³æ³•æ˜¯:
"æˆ‘èƒ½ä¸èƒ½é¸è®€é¤é£²ç§‘...?"`,

      `ä½ é«˜ä¸­æ™‚æˆç¸¾å°šå¯ï¼Œä½†å°æ–¼äººç”Ÿçš„æ–¹å‘ä¸¦æ²’æœ‰å¤ªå¤šçš„æ©Ÿæœƒæ¢å°‹ï¼Œ
ä½ å› ç‚ºå–œæ­¡ç”Ÿç‰©èª²ï¼Œä¹Ÿç†±æ„›åšå¯¦é©—ï¼Œæ–¼æ˜¯è€ƒå¤§å­¸æ™‚ä½ ç”³è«‹äº†åŒ—é†«é†«æŠ€ç³»ï¼Œä¸¦æˆåŠŸçš„éŒ„å–ã€‚
ä½ åœ¨é†«é™¢å¯¦ç¿’æ™‚ï¼Œç™¼ç¾è‡ªå·±é›–ç„¶ä¸è¨å­æˆç‚ºé†«æª¢å¸«ï¼Œä½†ä¹Ÿæ²’æœ‰å¤ªå¤šçš„ç†±æƒ…ã€‚

å¤§å­¸ç•¢æ¥­å¾Œä½ è¿·èŒ«äº†ä¸€é™£å­ï¼Œä½†å¾Œä¾†æƒ³é€šäº†ï¼Œ
ä½ æ±ºå®šè¦è©¦è‘—è¿½å°‹éå¾€æœªç«Ÿçš„é¡˜æœ›: æˆç‚ºå°ˆæ¥­å»šå¸«ã€‚
ä½ å¾—ä¸åˆ°å®¶äººçš„æ”¯æŒï¼Œæ–¼æ˜¯ä½ å¸Œæœ›å‰å¾€æ¾³æ´²æ‰“å·¥ï¼Œè¿…é€Ÿè³ºå–å»šè—å­¸æ ¡çš„å­¸è²»ã€‚
ä½†é€™å€‹è¨ˆç•«å……æ»¿äº†æœªçŸ¥ï¼Œä¹Ÿå¯èƒ½æœƒéå¸¸è¾›è‹¦ï¼Œä½ çŒ¶è±«äº†ä¸€é™£å­...`,

      `ä½ æŠµé”æ¾³æ´²å¾Œï¼Œåœ¨è¾²å ´æ—¥å‡ºè€Œä½œæ—¥è½è€Œæ¯ï¼Œé›–ç„¶å·¥ä½œè¾›è‹¦ï¼Œä½†æ—¥å­éå¾—å……å¯¦å¯§éœã€‚
ä½ å¾ˆå¿«åœ°å­˜åˆ°äº†å­¸è²»ï¼ŒèŠ±äº†é»æ™‚é–“è€ƒè‹±æ–‡ä¸¦é †åˆ©åœ°ç”³è«‹é€²å»šè—å­¸æ ¡ã€‚
åœ¨é‚£è£¡ä½ èªè­˜äº†ä¾†è‡ªä¸–ç•Œå„åœ°çš„åŒå­¸ï¼Œ
ä¹Ÿè—‰ç”±æ‰“å·¥èˆ‡èª²å ‚å¯¦ä½œå­¸ç¿’åˆ°é—œæ–¼å•†æ¥­å»šæˆ¿çš„å„ç¨®çŸ¥è­˜åŠçƒ¹é£ªæŠ€å·§ã€‚

å¾Œä¾†ä½ åœ¨å¯¦ç¿’æœŸé–“ï¼Œå¶ç„¶å¾—çŸ¥äº†ç¾åœ‹çš„å·¥ä½œæ©Ÿæœƒï¼Œ
ä½ éå¸¸å¿ƒå‹•ï¼Œä½†è‹¥å‰å¾€ç¾åœ‹å°‡æœƒæ‰“äº‚ä½ ç§»æ°‘æ¾³æ´²çš„è¨ˆç•«...`,

      `ä½ åœ¨ç´ç´„çš„å»šæˆ¿é–‹å§‹å·¥ä½œï¼Œé›–ç„¶å£“åŠ›èˆ‡ç¯€å¥éƒ½èˆ‡æ¾³æ´²ä¸åŒï¼Œ
ä½†ä½ çš„å­¸ç¿’èƒ½åŠ›å¾ˆå¥½ï¼Œå·¥ä½œæ™‚æœ‰æ¢ä¸ç´Šï¼Œä½ é©æ‡‰å¾—ä¸éŒ¯ä¸¦ä¸”å—åˆ°ä¸»å»šçš„è‚¯å®šã€‚

æŸå¤©ï¼Œä¸»å»šå› ç‚ºä½ çš„å·¥ä½œåˆç´„å³å°‡åˆ°æœŸï¼Œæ–¼æ˜¯æ‰¾ä½ é¢è«‡ï¼Œ
ä»–é‚€è«‹ä½ å‰å¾€å€«æ•¦çš„åˆ†åº—ä»»è·ï¼Œ
ä½ ç•¶æ™‚å¾ˆå–œæ­¡ç´ç´„çš„ç’°å¢ƒï¼Œä¹Ÿçµäº¤äº†è¨±å¤šæœ‹å‹ï¼Œä½ ä¸¦ä¸æ˜¯å¾ˆæƒ³é›¢é–‹ï¼Œ
ä½†å¦ä¸€æ–¹é¢ï¼Œä½ ä¹Ÿå¾ˆæƒ³æ¢ç´¢æœªçŸ¥çš„ä¸€éš…...`,


      `ä¸ä¹…å¾Œæ–°å† ç–«æƒ…åœ¨å…¨çƒçˆ†ç™¼ï¼Œ
çˆ†ç™¼åˆæœŸï¼Œå°ç£å› ç‚ºç›¸å°å®‰å…¨ï¼Œå®¶äººå¸Œæœ›ä½ å…ˆå›å®¶é¿é›£ï¼Œä½ è©•ä¼°ä¹‹å¾Œæ±ºå®šå…ˆå›å°ç£ã€‚
å¾Œä¾†ä½ åˆ°å°åŒ—çš„é¤å»³å·¥ä½œï¼Œ
ç™¼ç¾è‡ªå·±å°æ–¼å°ç£çš„è·å ´æ–‡åŒ–ä¸å¤ªé©æ‡‰ï¼Œä½†ä½ æ±ºå®šå…ˆå¿è€æˆ–æƒ³è¾¦æ³•æºé€šèˆ‡å…‹æœã€‚
æœ€çµ‚ä½ é‚„æ˜¯å¤±å»äº†ç”Ÿæ´»èˆ‡å·¥ä½œçš„å¹³è¡¡ï¼Œ
æ•´å€‹äººè®Šå¾—å¾ˆä¸å¿«æ¨‚ï¼Œç”šè‡³é–‹å§‹è¨å­ä¸‹å»šä¸”æ‡·ç–‘äººç”Ÿã€‚

ä½ ç—›å®šæ€ç—›ï¼Œæ€è€ƒå†ä¸‰ï¼Œæœ€å¾Œä½ æ±ºå®šé›¢è·ä¸¦ä¸”é›¢é–‹å°åŒ—ã€‚
å›åˆ°å°ä¸­ï¼Œä½ æ²‰æ¾±äº†ä¸€é™£å­ï¼Œå§‹çµ‚è¦ºå¾—æœ‰ç¨®æ¼‚æµæœªç«Ÿä¹‹æ„Ÿï¼Œ
æ–¼æ˜¯ä½ é–å®šäº†åŠ æ‹¿å¤§æ‰“å·¥çš„æ©Ÿæœƒï¼Œä½†ç”±æ–¼ä½ å·²ä¸å¦‚éå»èº«å¼·é«”å£¯ï¼Œä½ å¾ˆçŒ¶è±«...`,

      `ä½ æ‡·æŠ±è‘—é‡æ‹¾æ–°ç”Ÿæ´»çš„å¿ƒå‰å¾€å¤šå€«å¤šï¼Œä¸¦å¾—åˆ°æ©Ÿæœƒåœ¨ä¸€é–“ç±³å…¶æ—é¤å»³å·¥ä½œã€‚
èµ·åˆä½ å…¢å…¢æ¥­æ¥­åœ°å·¥ä½œï¼Œä»¥ç‚ºä¸€åˆ‡éƒ½é–‹å§‹å¥½è½‰äº†èµ·ä¾†ï¼Œ
ä½†ä½ ç™¼ç¾ä½ çš„ä¸»ç®¡æœƒåœ¨å·¥ä½œæ™‚è¨€èªé¨·æ“¾ä½ ï¼Œæˆ–æ˜¯å°‡ä½ çš„ç‰©å“è—èµ·ä¾†éœ¸å‡Œä½ ï¼Œ
ä½ å¿è€äº†è¨±ä¹…ä»¥å¾Œï¼Œçµ‚æ–¼åœ¨æŸä¸€å¤©å…§å¿ƒçš„å°ç«å±±çˆ†ç™¼äº†!
ä½ å°‡äº‹æƒ…å ±å‘Šä¸»å»šï¼Œä½†ä¸»å»šé¡¯ç„¶åè¢’ä½ çš„ä¸»ç®¡ï¼Œæ–¼æ˜¯ä½ çš„å¤©ç§¤é–‹å§‹æ‹‰æ‰¯...`,

      `ä½ å›åˆ°å°ç£ï¼Œæª¢è¨è‡ªå·±ï¼Œæ€è€ƒäº†è¨±å¤šé—œæ–¼äººèˆ‡äººä¹‹é–“çš„ï¼Œé—œæ–¼è·æ¶¯çš„ï¼Œ
é—œæ–¼äººç”Ÿçš„å„ç¨®æŠ‰æ“‡ã€‚
ä½ å°è‡ªå·±ååˆ†å¤±æœ›ï¼Œæ–¼æ˜¯æ±‚åŠ©æœ‹å‹é–‹å°ä½ ï¼Œæœ€å¾Œä½ å€‘è¨è«–å‡ºä¸€å€‹çµè«–:
"ä¸–ç•Œä¹‹å¤§ï¼Œåªæœ‰ä½ ä¸æƒ³åšçš„äº‹ï¼Œæ²’æœ‰ä½ ä¸èƒ½åšçš„äº‹ã€‚"

ä½ æ±ºå®šè½‰æ›è·‘é“ï¼Œé‡å•Ÿäººç”Ÿï¼Œç›®æ¨™æ˜¯é€²å…¥ç§‘æŠ€ç”¢æ¥­ã€‚
é›–ç„¶ä½ æ¯«ç„¡åŸºç¤ï¼Œç¶“æ¿Ÿä¹Ÿä¸å¯¬è£•ï¼Œ
ä½†ä½ æƒ³è¾¦æ³•å ±åäº†è·è¨“å±€è£œåŠ©çš„ AIoT èˆ‡ Python ç›¸é—œçš„èª²ç¨‹ï¼Œ
ä½ åœ¨èª²å ‚ä¸­ç”±è€å¸«å¼•é ˜å…¥é–€ï¼Œ
å­¸åˆ°äº†Arduinoã€å‰ç«¯è¨­è¨ˆã€è³‡æ–™åº«ã€appè¨­è¨ˆã€pythonã€ä»¥åŠAIè¾¨è­˜ç­‰ç­‰çš„çŸ¥è­˜ï¼Œ
é›–ç„¶éƒ½å¾ˆç²—æ·ºï¼Œä½†ä½ ä»ç„¶åŠªåŠ›åœ°èˆ‡åŒå­¸å”ä½œå®Œæˆäº†ä¸€å€‹ç°¡å–®çš„å°ˆé¡Œã€‚
åœ¨å­¸ç¿’æœŸé–“ï¼Œä½ ç™¼ç¾è‡ªå·±çš„å€‹æ€§å…¶å¯¦å¾ˆé©åˆé‚è¼¯æ€è€ƒï¼Œä¹Ÿå¾ˆå–œæ­¡å®‰å®‰éœéœçš„å®Œæˆä»»å‹™ï¼Œ
ä½ è¦ºå¾—ä½ é©åˆã€ä¹Ÿé¡˜æ„ç¹¼çºŒæ¢ç´¢ç§‘æŠ€é ˜åŸŸï¼Œ
ä½†ä½ ååˆ†æ“”å¿ƒä½ å·²å¹´è¯è€å»ï¼Œå‰æ–¹å¯èƒ½éšœç¤™é‡é‡...`
];

    const wrongEndings = [
      'ä½ é¸æ“‡äº†é€²å…¥é¤é£²ç§‘ï¼Œä¸¦ä¸”å…¢å…¢æ¥­æ¥­çš„å­¸ç¿’ï¼Œç•¢æ¥­å¾Œä½ åœ¨é¤é£²æ¥­å·¥ä½œäº†åå¹´ï¼Œæœ€å¾Œé–‹äº†è‡ªå·±çš„å°åº—ï¼Œç”Ÿæ„èˆˆéš†ï¼Œä½ é›–å¿™ç¢Œä½†å¾ˆå¿«æ¨‚ã€‚The Endã€‚',
      'ä½ æ²’æœ‰å»æ¾³æ´²ï¼Œè€Œæ˜¯é¸æ“‡ç•™åœ¨å°ç£æº–å‚™åœ‹è€ƒï¼Œè€ƒåˆ°é†«æª¢å¸«åŸ·ç…§å¾Œï¼Œä½ é–‹å§‹åœ¨é†«é™¢è£¡å·¥ä½œï¼Œä¸€æ™ƒçœ¼å°±æ˜¯åå¹´ï¼Œä½ ç™¼ç¾å®‰ç©©çš„æ—¥å­å…¶å¯¦ä¹Ÿä¸éŒ¯ã€‚The Endã€‚',
      'ä½ æ±ºå®šç•™åœ¨æ¾³æ´²å®Œæˆç§»æ°‘è¨ˆç•«ï¼Œç¶“éäº†åå¹´çš„åŠªåŠ›ï¼Œä½ çµ‚æ–¼æ‹¿åˆ°äº†æ¾³æ´²å…¬æ°‘çš„èº«åˆ†ï¼Œé›–ç„¶å®Œæˆäº†ä¸€å€‹é å¤§çš„ç›®æ¨™ï¼Œä½†ä½ å§‹çµ‚è¦ºå¾—ä½ æ˜¯å€‹ç•°é„‰äººã€‚The Endã€‚',
      'ä½ æ¥å—ä¸»å»šçš„é‚€è«‹å‰å¾€å€«æ•¦å·¥ä½œï¼Œä½†åšæ²’å¤šä¹…æ–°å† ç–«æƒ…å°±çˆ†ç™¼ï¼Œä½ å› ç‚ºå°åŸé—œåœ¨å®¶è£¡å¤ªç„¡èŠï¼Œé–‹å§‹ç¶“ç‡ŸYTæ‹æ”è‡ªå·±çš„è€å»¢ç”Ÿæ´»ï¼Œå»æ„å¤–ç²å¾—äº†è¨±å¤šç²‰çµ²ï¼Œæ–¼æ˜¯ä½ è½‰è·æˆç‚ºYoutuberï¼Œç›®å‰ç²‰çµ²ç©©å®šæˆé•·ä¸­ã€‚The Endã€‚',
      'ä½ æ²’æœ‰å»åŠ æ‹¿å¤§ï¼Œå°±åœ¨ä½ æ„Ÿè¦ºäººç”Ÿå¡ä½çš„æ™‚å€™ï¼Œæœ‹å‹ä¸Ÿçµ¦ä½ ä¸€çµ„ä»–ä¸æƒ³ä¸Šçš„ç·šä¸Šå æ˜Ÿèª²ç¨‹ï¼Œç¶“éäº†å¹¾å¹´ï¼Œä½ é è‡ªå·±ç ”ç©¶å‡ºä¸€ç•ªæˆæœï¼Œæˆç‚ºä¸€å€‹å°ˆæ¥­çš„å æ˜Ÿå¸«ï¼Œä¸åƒ…ç‚ºè‡ªå·±è§£æƒ‘ï¼Œä¹Ÿç‚ºä»–äººè§£æƒ‘ã€‚The Endã€‚',
      'ä½ æ±ºå®šå¿è¾±è² é‡ç¹¼çºŒç†¬ä¸‹å»ï¼Œçµ‚æ–¼åœ¨ç†¬äº†åå¹´ä»¥å¾Œï¼Œä½ è‡ªå·±é–‹äº†ä¸€é–“é¤å»³ï¼Œä¸¦ä¸”æˆåŠŸçš„æ‘˜æ˜Ÿï¼Œæˆç‚ºç±³å…¶æ—æ˜Ÿç´šä¸»å»šã€‚The Endã€‚ã€‚',
      'ä½ æ±ºå®šä¿å®ˆçš„ç”Ÿæ´»ï¼Œå ±åäº†é«˜æ™®è€ƒï¼Œç”±æ–¼ä½ æ“…é•·è®€æ›¸è€ƒè©¦ï¼Œä¸€å…©å¹´ä¹‹å¾Œå°±é †åˆ©åœ°è€ƒä¸Šï¼Œæˆç‚ºå…¬å‹™å“¡ä¹‹å¾Œï¼Œå·¥ä½œé›£å…ä¹å‘³ä½†å»ç©©å®šï¼Œä½ å·²çŸ¥è¶³ã€‚The Endã€‚'
    ];

    function typeText(text, el, cb) {
      let i = 0;
      const speed = 30;
      let skip = false;
      let typing = true;

      const interval = setInterval(() => {
        if (skip) {
          el.textContent = text;
          clearInterval(interval);
          document.removeEventListener("click", handleClick);
          typing = false;
          if (cb) cb();
          return;
        }

        el.textContent += text.charAt(i);
        i++;
        if (i === text.length) {
          clearInterval(interval);
          document.removeEventListener("click", handleClick);
          typing = false;
          if (cb) cb();
        }
      }, speed);

      // âš ï¸ å¿…é ˆåœ¨ setInterval å¾Œå†å•Ÿç”¨ click listenerï¼Œé¿å…ç«‹å³è§¸ç™¼
      const handleClick = () => {
        if (typing) skip = true;
      };
      setTimeout(() => {
        document.addEventListener("click", handleClick);
      }, 100); // é¿å…åˆå§‹åŒ–æ™‚ç«‹å³è§¸ç™¼
    }

      //å°äººä½ç½®+å‹•ç•«
      const characterPositions = {
        step1: { left: 1190, top: 300, range: 20 },    // å°ç£
        step2: { left: 1190, top: 300, range: 20 },   
        step3: { left: 1300, top: 580, range: 40 },    // æ¾³æ´²
        step4: { left: 350, top: 230, range: 35 },     // ç¾åœ‹
        step5: { left: 1200, top: 300, range: 20 },    
        step6: { left: 320, top: 180, range: 35 },     // åŠ æ‹¿å¤§
        step7: { left: 1200, top: 300, range: 20 }      
      };

      let walkInterval = null;

    function moveCharacterToStep(stepId) {
      const character = document.querySelector('.map-character');
      const position = characterPositions[stepId];
      if (!position) return;

      if (walkInterval) clearInterval(walkInterval);

      const centerX = position.left;
      const centerY = position.top;
      const walkRange = position.range || 25;
      let direction = 1;
      let lastDirection = 1;
      let currentX = centerX;

      character.style.left = `${currentX}px`;
      character.style.top = `${centerY}px`;
      character.style.backgroundImage = "url('images/walking-man.gif')";
      
      walkInterval = setInterval(() => {
        currentX += direction;
        character.style.left = `${currentX}px`;

        let hitLeft = currentX <= centerX - walkRange;
        let hitRight = currentX >= centerX + walkRange;

        if (hitLeft || hitRight) {
          direction *= -1; // å…ˆæ”¹æ–¹å‘
          if (direction !== lastDirection) {
            character.style.backgroundImage =
              direction === -1
                ? "url('images/walking-man-left.gif')"
                : "url('images/walking-man.gif')";
            lastDirection = direction;
          }
        }
      }, 50);
    }


    function showStep(id, index) {
      const section = document.getElementById(id);
      section.style.display = 'flex';
      const storyEl = document.getElementById('story' + (index + 1));
      typeText(stories[index], storyEl, () => {
        document.getElementById('dialogue' + (index + 1)).style.display = 'block';
      });
      moveCharacterToStep(id); // è®“å°äººéš¨æ•…äº‹ç§»å‹•
    }

    function nextStep(current, next) {
      document.getElementById(current).style.display = 'none';
      showStep(next, parseInt(next.replace('step', '')) - 1);
    }

    function wrongChoice(stepId) {
      const idx = parseInt(stepId.replace('step', '')) - 1;
      const result = document.getElementById('result' + (idx + 1));
      result.innerHTML = wrongEndings[idx] + '<br><br><button onclick="retryStep(\'' + stepId + '\')">å†é¸ä¸€æ¬¡</button>';
      result.style.display = 'block';
      document.getElementById('dialogue' + (idx + 1)).style.display = 'none';
    }

    function retryStep(stepId) {
      const idx = parseInt(stepId.replace('step', '')) - 1;
      const section = document.getElementById(stepId);
      section.style.display = 'flex';
      const storyEl = document.getElementById('story' + (idx + 1));
      storyEl.textContent = '';
      document.getElementById('dialogue' + (idx + 1)).style.display = 'none';
      document.getElementById('result' + (idx + 1)).style.display = 'none';
      showStep(stepId, idx);
    }

    function endGame() {
      window.location.href = "ending.html";
    }

    function showPopup() {
      document.getElementById('map-popup').style.display = 'block';

      const taiwanContainer = document.getElementById('taiwan-container');
      taiwanContainer.style.display = 'block';
      document.getElementById('taiwan-glow').style.display = 'block';

      setTimeout(() => {
        taiwanContainer.style.opacity = '1';
        taiwanContainer.style.transform = 'translate(-50%, -50%) scale(1)';
      }, 50);

      // åœæ­¢å°äººé£„å‹•
      clearInterval(window.characterInterval);

      // ç§»å‹•å°äººåˆ°æŒ‡å®šä½ç½®
      const character = document.querySelector('.map-character');
      character.style.left = '1200px';
      character.style.top = '300px';

      character.style.backgroundImage = "url('images/walking-man-stopped.png')";
      
      
    }  
      
    function startJourney() {
      document.getElementById('cover-map').style.display = 'none';
      showStep('step1', 0);
    }
    
    window.onload = () => {
      const character = document.querySelector('.map-character');

    function moveCharacterRandomly() {
      const map = document.getElementById('cover-map');
      const mapWidth = map.offsetWidth;
      const mapHeight = map.offsetHeight;

      // è¨ˆç®—ç¯„åœå…§éš¨æ©Ÿä½ç½®ï¼ˆé¿å…è¶…å‡ºç•«é¢ï¼‰
      const x = Math.random() * (mapWidth - 60); // é ç•™å¯¬åº¦
      const y = Math.random() * (mapHeight - 60); // é ç•™é«˜åº¦

      character.style.left = `${x}px`;
      character.style.top = `${y}px`;
    }
    // æ¯ 3 ç§’é£„å‹•ä¸€æ¬¡
    window.characterInterval = setInterval(moveCharacterRandomly, 3000);

    // ç¬¬ä¸€æ¬¡è¼‰å…¥å…ˆå‹•ä¸€æ¬¡
    moveCharacterRandomly();
    };
  </script>
</body>

</html>
